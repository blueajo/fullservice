<?php

/**
 * Implements hook_mail().
 */
function fullservice_forms_mail($key, &$message, $params)
{
  switch ($key) {
    case 'contact_form':
      // Always send from the authenticated mailbox
      $message['from'] = 'noreply@fullserviceoffice.com';

      // Subject
      $message['subject'] = $params['subject'];

      // Message body
      $body = $params['message'] ?? '';
      if (!empty($params['pitches'])) {
        $body .= "\n\n• " . implode("\n• ", $params['pitches']);
      }
      $message['body'][] = $body;

      // Optional: set Reply-To to the user email so you can reply directly
      if (!empty($params['reply_to'])) {
        $message['headers']['Reply-To'] = $params['reply_to'];
      }
      break;
  }
}
